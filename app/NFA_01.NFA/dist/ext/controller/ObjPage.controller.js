sap.ui.define(["sap/ui/core/mvc/ControllerExtension","sap/m/Column","sap/m/ColumnListItem"],function(e,t,a){"use strict";return e.extend("NFA01.NFA.ext.controller.ObjPage",{override:{onInit:function(){var e=this.base.getExtensionAPI().getModel()},viewstate:{onBeforeStateApplied:async function(e){debugger}},routing:{onAfterBinding:async function(e){const n=this.base.getExtensionAPI(),i=n.getModel(),s="readSrcEvents",o=i.bindContext(`/${s}(...)`);let r;let d=e.sPath.replace(/[^0-9]/g,"");d="Doc"+d;let l=["Itemname","Description","Quantity","Unit"];let c=["question"];debugger;sap.ui.core.BusyIndicator.show(0);$.ajax({url:`https://nfa_app-grateful-duiker-kc.cfapps.us20.hana.ondemand.com/dev/GetSupplierBidsv1?event_id=${d}`,type:"GET",success:function(e){debugger;let i=n.byId("fe::table::questionaire::LineItem::Questions::Table");let s=n.byId("fe::table::questionaire::LineItem::Details::Table");let u=i.getContent().mAggregations._content;let p=s.getContent().mAggregations._content;u.destroyItems();p.destroyItems();u.destroyColumns();p.destroyColumns();o.setParameter("event_id","Doc33123002");let g=["id"];let h=e?.qns?.qns_data;e?.qns?.qns_data.forEach(e=>{let a=Object.keys(e);let n=Object.values(e);c.forEach(e=>{if(!g.includes(e)){var a=new t({header:new sap.m.Label({text:e})});u.addColumn(a);g.push(e)}});a.forEach(e=>{if(!g.includes(e)){var a=new t({header:new sap.m.Label({text:e})});u.addColumn(a);g.push(e)}});let i=e?.id;if(!g.includes("Edit/Delete")&&i!=undefined){debugger;var s=new t({header:new sap.m.Label({text:"Edit/Delete"})});u.addColumn(s);g.push("Edit/Delete")}});g=["id"];let f=e?.data?.items?.bidding_data;e?.data?.items?.bidding_data.forEach(e=>{let a=Object.keys(e);let n=Object.values(e);l.forEach(e=>{if(!g.includes(e)){var a=new t({header:new sap.m.Label({text:e})});p.addColumn(a);g.push(e)}});a.forEach(e=>{if(!g.includes(e)){var a=new t({header:new sap.m.Label({text:e})});p.addColumn(a);g.push(e)}});let i=e?.id;if(!g.includes("Edit/Delete")&&i!=undefined){var s=new t({header:new sap.m.Label({text:"Edit/Delete"})});p.addColumn(s);g.push("Edit/Delete")}});let m=[];let v;let x;if(h!=undefined){for(let e=0;e<h.length;e++){for(let t=0;t<c.length;t++){r=new sap.m.Text({text:h[e][c[t]]});m.push(r);delete h[e][c[t]]}let t=h[e]?.id;if(t!=undefined){delete h[e].id}x=Object.values(h[e]);x.forEach(e=>{r=new sap.m.Text({text:e});m.push(r)});if(t!=undefined){var E=new sap.m.HBox;E.addItem(new sap.m.Button({icon:"sap-icon://edit",type:"Emphasized",press:[function(e){debugger;var t=e.getSource().getParent().getParent();var a=t.getCells();let n=e.getSource().getParent().getParent().getParent().mAggregations.columns;let i=[];let s=[];let o={};n.forEach(e=>{i.push(e.mAggregations.header.mProperties.text)});i.splice(i.length-1,1);a.forEach((e,t)=>{if(t<a.length-1){s.push(e.getText())}});i.forEach((e,t)=>{o[`${e}`]=s[t]});var r=[];this.editDialog=new sap.m.Dialog({title:"Edit Question",contentWidth:"400px",contentHeight:"500px",resizable:true,draggable:true,beginButton:new sap.m.Button({text:"Save",type:"Success",icon:"sap-icon://save",press:function(e){debugger;var t=this;var n={};let s={};a.forEach(function(e,t){if(t!==a.length-1){var n=r[t];var o=n.getValue();e.setText(o);var d=n.getPlaceholder();s[i[t]]=o}});n.prevdata=o;n.currentdata=s;var l="https://nfa_app-grateful-duiker-kc.cfapps.us20.hana.ondemand.com/dev/postQuestion?event_id="+d;$.ajax({type:"PATCH",url:l,data:JSON.stringify(n),contentType:"application/json",dataType:"json",success:function(e){location.reload()}});this.editDialog.close()}.bind(this)})});var l=new sap.m.VBox;a.forEach(function(e,t){if(t!==a.length-1){var n=new sap.m.Input({width:"100%",placeholder:e.getText()});l.addItem(n);r.push(n)}});this.editDialog.addContent(l);a.forEach(function(e,t){if(t!==a.length-1){r[t].setValue(e.getText())}});this.editDialog.open()},this]}));E.addItem(new sap.m.ToolbarSpacer({width:"10px"}));E.addItem(new sap.m.Button({icon:"sap-icon://delete",type:"Negative",press:[function(e){debugger;var t="https://nfa_app-grateful-duiker-kc.cfapps.us20.hana.ondemand.com/dev/postQuestion?event_id="+d;let a=e.getSource().getParent().getParent().getParent().mAggregations.columns;var n=e.getSource();var i=n.getParent().getParent();let s=i.getCells();a.splice(a.length-1,1);s.splice(s.length-1,1);let o=[];let r=[];a.forEach(e=>{o.push(e.mAggregations.header.mProperties.text)});s.forEach(e=>{r.push(e.getText())});let l={};o.forEach((e,t)=>{l[`${e}`]=r[t]});let c=this;let u=location;$.ajax({type:"DELETE",url:t,data:JSON.stringify(l),contentType:"application/json",dataType:"json",success:function(e){debugger;u.reload()}})},this]}));m.push(E)}v=new a({cells:m});u.addItem(v);m=[]}}if(f!=undefined){for(let e=0;e<f.length;e++){for(let t=0;t<l.length;t++){r=new sap.m.Text({text:f[e][l[t]]});m.push(r);delete f[e][l[t]]}let t=f[e]?.id;if(t!=undefined){delete f[e].id}x=Object.values(f[e]);x.forEach(e=>{r=new sap.m.Text({text:e});m.push(r)});if(t!=undefined){var E=new sap.m.HBox;E.addItem(new sap.m.Button({icon:"sap-icon://edit",type:"Emphasized",press:[function(e){debugger;var t=e.getSource().getParent().getParent();var a=t.getCells();let n=e.getSource().getParent().getParent().getParent().mAggregations.columns;let i=[];let s=[];let o={};n.forEach(e=>{i.push(e.mAggregations.header.mProperties.text)});i.splice(i.length-1,1);a.forEach((e,t)=>{if(t<a.length-1){s.push(e.getText())}});i.forEach((e,t)=>{o[`${e}`]=s[t]});var r=[];this.editDialog=new sap.m.Dialog({title:"Edit Question",contentWidth:"400px",contentHeight:"500px",resizable:true,draggable:true,beginButton:new sap.m.Button({text:"Save",type:"Success",icon:"sap-icon://save",press:function(e){debugger;var t=this;var n={};let s={};a.forEach(function(e,t){if(t!==a.length-1){var n=r[t];var o=n.getValue();e.setText(o);var d=n.getPlaceholder();s[i[t]]=o}});n.prevdata=o;n.currentdata=s;var l="https://nfa_app-grateful-duiker-kc.cfapps.us20.hana.ondemand.com/dev/GetSupplierBidsv1?event_id="+d;$.ajax({type:"PATCH",url:l,data:JSON.stringify(n),contentType:"application/json",dataType:"json",success:function(e){location.reload()}});this.editDialog.close()}.bind(this)})});var l=new sap.m.VBox;a.forEach(function(e,t){if(t!==a.length-1){var n=new sap.m.Input({width:"100%",placeholder:e.getText()});l.addItem(n);r.push(n)}});this.editDialog.addContent(l);a.forEach(function(e,t){if(t!==a.length-1){r[t].setValue(e.getText())}});this.editDialog.open()},this]}));E.addItem(new sap.m.ToolbarSpacer({width:"10px"}));E.addItem(new sap.m.Button({icon:"sap-icon://delete",type:"Negative",press:[function(e){debugger;var t="https://nfa_app-grateful-duiker-kc.cfapps.us20.hana.ondemand.com/dev/GetSupplierBidsv1?event_id="+d;let a=e.getSource().getParent().getParent().getParent().mAggregations.columns;var n=e.getSource();var i=n.getParent().getParent();let s=i.getCells();a.splice(a.length-1,1);s.splice(s.length-1,1);let o=[];let r=[];a.forEach(e=>{o.push(e.mAggregations.header.mProperties.text)});s.forEach(e=>{r.push(e.getText())});let l={};o.forEach((e,t)=>{l[`${e}`]=r[t]});let c=this;let u=location;$.ajax({type:"DELETE",url:t,data:JSON.stringify(l),contentType:"application/json",dataType:"json",success:function(e){debugger;u.reload()}})},this]}));m.push(E)}v=new a({cells:m});p.addItem(v);m=[]}}sap.ui.core.BusyIndicator.hide()},error:function(e){sap.ui.core.BusyIndicator.hide()}})}}}})});
//# sourceMappingURL=ObjPage.controller.js.map